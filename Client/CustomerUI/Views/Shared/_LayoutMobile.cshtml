<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewBag.Title</title>

    <!-- Enhanced Styles -->
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/CustomerUI.styles.css" asp-append-version="true" />
    <script src="https://cdn.tailwindcss.com/3.4.16"></script>
    <link href="https://cdn.jsdelivr.net/npm/remixicon/fonts/remixicon.css" rel="stylesheet">
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

    <!-- Enhanced Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif'],
                        'poppins': ['Poppins', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a',
                            DEFAULT: '#3b82f6',
                        },
                        secondary: {
                            50: '#f0fdf4',
                            100: '#dcfce7',
                            200: '#bbf7d0',
                            300: '#86efac',
                            400: '#4ade80',
                            500: '#22c55e',
                            600: '#16a34a',
                            700: '#15803d',
                            800: '#166534',
                            900: '#14532d',
                            DEFAULT: '#22c55e',
                        },
                        accent: {
                            DEFAULT: '#a855f7',
                            50: '#faf5ff',
                            100: '#f3e8ff',
                            200: '#e9d5ff',
                            300: '#d8b4fe',
                            400: '#c084fc',
                            500: '#a855f7',
                            600: '#9333ea',
                            700: '#7c2d12',
                            800: '#6b21a8',
                            900: '#581c87',
                        },
                    },
                    borderRadius: {
                        'xl': '12px',
                        '2xl': '16px',
                        '3xl': '20px',
                        '4xl': '24px',
                        'button': '12px',
                        'card': '16px',
                    },
                    boxShadow: {
                        'soft': '0 2px 15px -3px rgba(0, 0, 0, 0.07), 0 10px 20px -2px rgba(0, 0, 0, 0.04)',
                        'card': '0 4px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 15px -3px rgba(0, 0, 0, 0.05)',
                        'hover': '0 10px 40px -10px rgba(59, 130, 246, 0.3)',
                        'glow': '0 0 20px rgba(59, 130, 246, 0.4)',
                        'glass': '0 8px 32px rgba(0, 0, 0, 0.1)',
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-out',
                        'slide-up': 'slideUp 0.4s ease-out',
                        'slide-down': 'slideDown 0.3s ease-out',
                        'bounce-subtle': 'bounceSubtle 2s infinite',
                        'pulse-glow': 'pulseGlow 2s ease-in-out infinite',
                        'float': 'float 6s ease-in-out infinite',
                    },
                    backdropBlur: {
                        'xs': '2px',
                        'glass': '20px',
                    }
                },
            },
        };
    </script>

    <!-- Section for custom styles from view -->
    @RenderSection("Styles", required: false)

    <style>
        * {
            font-family: 'Inter', sans-serif;
        }

        body {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            position: relative;
        }

        /* Enhanced Animations */
        @@keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @@keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @@keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @@keyframes bounceSubtle {
            0%, 100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-3px);
            }
        }

        @@keyframes pulseGlow {
            0% {
                box-shadow: 0 0 5px rgba(59, 130, 246, 0.5);
            }

            50% {
                box-shadow: 0 0 20px rgba(59, 130, 246, 0.8);
            }

            100% {
                box-shadow: 0 0 5px rgba(59, 130, 246, 0.5);
            }
        }

        @@keyframes float {
            0%, 100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-5px);
            }
        }

        @@keyframes gradientShift {
            0% {
                background-position: 0% 50%;
            }

            50% {
                background-position: 100% 50%;
            }

            100% {
                background-position: 0% 50%;
            }
        }

        /* Glass Effects */
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px) saturate(120%);
            border: 1px solid rgba(0, 0, 0, 0.1);
            box-shadow: 0 4px 25px rgba(0, 0, 0, 0.15);
        }

        .glass-dark {
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(8px) saturate(120%);
        }

        /* Enhanced Gradient Backgrounds */
        .gradient-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        }

        .gradient-secondary {
            background: linear-gradient(135deg, #22c55e 0%, #15803d 100%);
        }

        .gradient-accent {
            background: linear-gradient(135deg, #a855f7 0%, #7c2d12 100%);
        }

        /* Logo Gradient Animation */
        .logo-gradient {
            background: linear-gradient(135deg, #3b82f6, #a855f7, #22c55e);
            background-size: 300% 300%;
            animation: gradientShift 8s ease-in-out infinite;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Enhanced Search */
        .search-enhanced {
            background: rgba(255, 255, 255, 1);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(0, 0, 0, 0.15);
            transition: all 0.3s ease;
        }

            .search-enhanced:focus-within {
                background: rgba(255, 255, 255, 1);
                border-color: rgba(59, 130, 246, 0.5);
                box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
            }

        /* Enhanced Buttons */
        .btn-enhanced {
            position: relative;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

            .btn-enhanced:hover {
                transform: translateY(-2px);
                box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
            }

            .btn-enhanced::before {
                content: '';
                position: absolute;
                top: 50%;
                left: 50%;
                width: 0;
                height: 0;
                background: rgba(255, 255, 255, 0.2);
                border-radius: 50%;
                transition: all 0.4s ease;
                transform: translate(-50%, -50%);
            }

            .btn-enhanced:active::before {
                width: 300px;
                height: 300px;
            }

        /* Enhanced Bottom Navigation - Responsive */
        .bottom-nav-item {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            min-width: 44px; /* Minimum touch target */
            min-height: 44px;
        }

            .bottom-nav-item.active {
                color: #3b82f6;
                transform: translateY(-2px);
            }

                .bottom-nav-item.active::before {
                    content: '';
                    position: absolute;
                    bottom: -2px;
                    left: 50%;
                    transform: translateX(-50%);
                    width: 4px;
                    height: 4px;
                    background: #3b82f6;
                    border-radius: 50%;
                }

        /* Profile Avatar in Bottom Nav - Responsive sizes */
        .profile-avatar-nav {
            width: 24px;
            height: 24px;
            border: 2px solid #3b82f6;
            border-radius: 50%;
            object-fit: cover;
        }

        /* Small screen optimization */
        @@media (max-width: 375px) {
            .profile-avatar-nav {
                width: 20px;
                height: 20px;
                border: 1px solid #3b82f6;
            }

            .bottom-nav-item {
                padding: 0.5rem 0.25rem !important;
            }

                .bottom-nav-item span {
                    font-size: 0.6rem !important;
                }

                .bottom-nav-item .w-8 {
                    width: 1.5rem !important;
                    height: 1.5rem !important;
                }

                .bottom-nav-item .text-xl {
                    font-size: 1rem !important;
                }
        }

        /* Very small screens (320px) */
        @@media (max-width: 320px) {
            .bottom-nav-item {
                padding: 0.5rem 0.125rem !important;
            }

                .bottom-nav-item span {
                    display: none; /* Hide text labels on very small screens */
                }

            .profile-avatar-nav {
                width: 18px;
                height: 18px;
            }
        }

        /* Enhanced Badge */
        .notification-badge {
            background: linear-gradient(135deg, #ef4444, #f97316);
            animation: bounceSubtle 2s infinite;
        }

        /* Solid backgrounds */
        .dropdown-solid {
            background: #ffffff;
            border: 1px solid #e2e8f0;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .drawer-solid {
            background: #ffffff !important;
            backdrop-filter: none !important;
            box-shadow: 2px 0 30px rgba(0, 0, 0, 0.4);
            border-right: 1px solid #e2e8f0;
        }

        .mobile-menu-container {
            background: #ffffff !important;
            backdrop-filter: none !important;
        }

        .mobile-menu-content {
            background: #ffffff !important;
        }

        /* Quick Action Button - Responsive positioning */
        .quick-action {
            position: fixed;
            bottom: 100px;
            right: 20px;
            z-index: 30;
            width: 56px;
            height: 56px;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
            transition: all 0.3s ease;
        }

            .quick-action:hover {
                transform: scale(1.1);
                box-shadow: 0 12px 35px rgba(59, 130, 246, 0.6);
            }

        /* Small screen quick action positioning */
        @@media (max-width: 375px) {
            .quick-action {
                width: 48px;
                height: 48px;
                bottom: 90px;
                right: 15px;
            }
        }

        /* Profile dropdown responsive positioning */
        .profile-dropdown {
            position: absolute;
            bottom: 100%;
            right: 0;
            margin-bottom: 0.5rem;
            width: 16rem;
        }

        @@media (max-width: 425px) {
            .profile-dropdown {
                right: -50%;
                width: 14rem;
            }
        }

        @@media (max-width: 375px) {
            .profile-dropdown {
                right: -75%;
                width: 12rem;
            }
        }

        @@media (max-width: 320px) {
            .profile-dropdown {
                right: -100%;
                width: 11rem;
            }
        }

        /* Bottom safe area for modern phones */
        @@supports (padding: max(0px)) {
            .bottom-nav-safe {
                padding-bottom: max(8px, env(safe-area-inset-bottom));
            }
        }

        /* Bottom navigation container responsive */
        .bottom-nav-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 0.5rem 0.25rem;
            min-height: 60px;
        }

        @@media (max-width: 375px) {
            .bottom-nav-container {
                padding: 0.25rem 0.125rem;
                min-height: 56px;
            }
        }

        @@media (max-width: 320px) {
            .bottom-nav-container {
                padding: 0.25rem 0;
                min-height: 52px;
            }
        }
        #header-mobile{
            position: relative;
        }
    </style>
</head>

<body id="body-mobile" class="bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 text-slate-800 font-inter">

    @{
        var accessToken = Context.Request.Cookies["AccessToken"];
        var fullName = Context.Session.GetString("FullName");
        var avatarUrl = Context.Session.GetString("AvatarUrl");
        var userEmail = Context.Session.GetString("Email");
        var isLoggedIn = !string.IsNullOrEmpty(accessToken) && !string.IsNullOrEmpty(fullName);
    }

    <!-- Enhanced Mobile Header - Simplified -->
    <header x-data="{
        mobileMenuOpen: false,
        searchOpen: false,
        notificationCount: 3
    }"
    id="header-mobile"
            class="mobile-nav glass-effect  top-0 z-50 shadow-soft">
        <div class="flex justify-between items-center h-16 px-4">

            <!-- Left: Menu Button -->
            <button x-on:click="mobileMenuOpen = true"
                    class="w-12 h-12 flex items-center justify-center rounded-xl hover:bg-white/40 transition-all duration-200 active:scale-95">
                <i class="ri-menu-3-line text-xl text-slate-700"></i>
            </button>

            <!-- Center: Logo -->
            <a asp-controller="Home" asp-action="Index" class="flex items-center space-x-2">
                <div class="w-10 h-10 gradient-primary rounded-xl flex items-center justify-center shadow-soft">
                    <i class="ri-football-line text-white text-lg animate-float"></i>
                </div>
                <h1 class="font-poppins font-bold text-xl logo-gradient">SportVenue</h1>
            </a>

            <!-- Right: Actions (Simplified for better UX) -->
            <div class="flex items-center space-x-2">
                @if (isLoggedIn)
                {
                    <!-- Messages Button -->
                    <a asp-controller="Chat" asp-action="Chat"
                       class="relative w-12 h-12 flex items-center justify-center rounded-xl gradient-secondary shadow-soft hover:shadow-hover transition-all duration-300 active:scale-95"
                       title="Messages">
                        <i class="ri-message-3-line text-lg text-white"></i>
                        <span x-show="notificationCount > 0"
                              class="notification-badge absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center text-xs text-white font-bold"
                              x-text="notificationCount"></span>
                    </a>
                }
                else
                {
                    <!-- Sign In Button -->
                    <a asp-controller="Common" asp-action="Login">
                        <button class="w-12 h-12 flex items-center justify-center rounded-xl gradient-primary shadow-soft hover:shadow-hover transition-all duration-200 active:scale-95">
                            <i class="ri-user-line text-xl text-white"></i>
                        </button>
                    </a>
                }
            </div>
        </div>

        <!-- Enhanced Mobile Menu Overlay -->
        <div x-show="mobileMenuOpen"
             x-transition:enter="transition ease-out duration-300"
             x-transition:enter-start="opacity-0"
             x-transition:enter-end="opacity-1"
             x-transition:leave="transition ease-in duration-200"
             x-transition:leave-start="opacity-1"
             x-transition:leave-end="opacity-0"
             class="fixed inset-0 bg-black/50 z-40"
             x-on:click="mobileMenuOpen = false">
            <div x-show="mobileMenuOpen"
                 x-transition:enter="transition ease-out duration-300 transform"
                 x-transition:enter-start="-translate-x-full"
                 x-transition:enter-end="translate-x-0"
                 x-transition:leave="transition ease-in duration-200 transform"
                 x-transition:leave-start="translate-x-0"
                 x-transition:leave-end="-translate-x-full"
                 x-on:click.stop
                 class="fixed left-0 top-0 h-full w-80 bg-white shadow-2xl z-50 mobile-menu-container">

                <div class="p-6 bg-white mobile-menu-content">
                    <!-- Menu Header -->
                    <div class="flex justify-between items-center mb-8">
                        <div class="flex items-center space-x-3">
                            <div class="w-10 h-10 gradient-primary rounded-xl flex items-center justify-center shadow-soft">
                                <i class="ri-football-line text-white text-lg"></i>
                            </div>
                            <h2 class="font-poppins font-bold text-xl logo-gradient">SportVenue</h2>
                        </div>
                        <button x-on:click="mobileMenuOpen = false"
                                class="w-10 h-10 flex items-center justify-center rounded-xl hover:bg-slate-100 transition-all duration-200">
                            <i class="ri-close-line text-xl text-slate-700"></i>
                        </button>
                    </div>

                    <!-- Enhanced Navigation -->
                    <nav class="space-y-2">
                        <a href="#" class="flex items-center px-4 py-4 text-slate-700 hover:bg-primary/10 hover:text-primary rounded-2xl transition-all duration-200 group">
                            <div class="w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center mr-4 group-hover:bg-primary/20 transition-colors">
                                <i class="ri-phone-line text-primary"></i>
                            </div>
                            <span class="font-medium text-lg">Contact Support</span>
                        </a>

                        <a asp-controller="Common" asp-action="Settings" class="flex items-center px-4 py-4 text-slate-700 hover:bg-secondary/10 hover:text-secondary rounded-2xl transition-all duration-200 group">
                            <div class="w-10 h-10 bg-secondary/10 rounded-xl flex items-center justify-center mr-4 group-hover:bg-secondary/20 transition-colors">
                                <i class="ri-settings-3-line text-secondary"></i>
                            </div>
                            <span class="font-medium text-lg">Settings</span>
                        </a>

                        <a href="#" class="flex items-center px-4 py-4 text-slate-700 hover:bg-accent/10 hover:text-accent rounded-2xl transition-all duration-200 group">
                            <div class="w-10 h-10 bg-accent/10 rounded-xl flex items-center justify-center mr-4 group-hover:bg-accent/20 transition-colors">
                                <i class="ri-information-line text-accent"></i>
                            </div>
                            <span class="font-medium text-lg">About</span>
                        </a>

                        <a href="#" class="flex items-center px-4 py-4 text-slate-700 hover:bg-primary/10 hover:text-primary rounded-2xl transition-all duration-200 group">
                            <div class="w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center mr-4 group-hover:bg-primary/20 transition-colors">
                                <i class="ri-star-line text-primary"></i>
                            </div>
                            <span class="font-medium text-lg">Rate App</span>
                        </a>
                    </nav>

                    <!-- User Info in Drawer (if logged in) -->
                    @if (isLoggedIn)
                    {
                        <div class="mt-8 pt-6 border-t border-slate-200">
                            <div class="bg-gradient-to-r from-primary/10 to-secondary/10 p-4 rounded-2xl">
                                <div class="flex items-center space-x-3">
                                    <img src="@avatarUrl" alt="Avatar" class="w-12 h-12 rounded-xl border-2 border-white shadow-sm" />
                                    <div>
                                        <p class="font-semibold text-slate-800">@fullName</p>
                                        <p class="text-sm text-slate-500">Premium Member</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                    else
                    {
                        <div class="mt-8 pt-6 border-t border-slate-200">
                            <a asp-controller="Common" asp-action="Login">
                                <button class="w-full btn-enhanced gradient-primary text-white py-4 rounded-2xl font-semibold shadow-soft hover:shadow-hover transition-all duration-300 flex items-center justify-center space-x-2">
                                    <i class="ri-login-circle-line text-lg"></i>
                                    <span>Sign In to SportVenue</span>
                                </button>
                            </a>
                        </div>
                    }
                </div>
            </div>
        </div>
    </header>

    <!-- Quick Action Button (Floating Action Button) -->
    <button class="quick-action">
        <i class="ri-add-line text-2xl text-white"></i>
    </button>

    <!-- Enhanced Bottom Navigation with Profile - Responsive -->
    <nav id="nav-mobile" x-data="{
        activeTab: 'home',
        userMenuOpen: false
    }" class="mobile-nav fixed bottom-0 left-0 right-0 glass-effect border-t border-slate-200 z-40 shadow-soft bottom-nav-safe" >
        <div class="bottom-nav-container">
            <!-- Home -->
            <a asp-controller="Home" asp-action="Index"
               x-on:click="activeTab = 'home'"
               :class="activeTab === 'home' ? 'bottom-nav-item active' : 'bottom-nav-item'"
               class="flex flex-col items-center py-2 px-1 text-slate-400 hover:text-primary transition-all duration-200 hover:scale-105 relative flex-1 max-w-none">
                <div class="w-6 h-6 flex items-center justify-center">
                    <i class="ri-home-4-line text-lg"></i>
                </div>
                <span class="text-xs mt-1 font-medium truncate">Home</span>
            </a>

            <!-- Groups/Teams -->
            <a asp-controller="Findteam" asp-action="Findteam"
               x-on:click="activeTab = 'groups'"
               :class="activeTab === 'groups' ? 'bottom-nav-item active' : 'bottom-nav-item'"
               class="flex flex-col items-center py-2 px-1 text-slate-400 hover:text-accent transition-all duration-200 hover:scale-105 relative flex-1 max-w-none">
                <div class="w-6 h-6 flex items-center justify-center">
                    <i class="ri-team-line text-lg"></i>
                </div>
                <span class="text-xs mt-1 font-medium truncate">Groups</span>
            </a>

            <!-- Notifications -->
            <a asp-controller="Notification" asp-action="Index"
               x-on:click="activeTab = 'notifications'"
               :class="activeTab === 'notifications' ? 'bottom-nav-item active' : 'bottom-nav-item'"
               class="flex flex-col items-center py-2 px-1 text-slate-400 hover:text-orange-500 transition-all duration-200 hover:scale-105 relative flex-1 max-w-none">
                <div class="w-6 h-6 flex items-center justify-center relative">
                    <i class="ri-notification-3-line text-lg"></i>
                    <span id="notification-badge-bottom"
                          class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full flex items-center justify-center text-xs text-white font-bold"
                          style="font-size: 8px; display:none"></span>
                </div>
                <span class="text-xs mt-1 font-medium truncate">Alerts</span>
            </a>

            <!-- User Profile -->
            <div class="relative flex-1 max-w-none">
                @if (isLoggedIn)
                {
                    <button x-on:click="userMenuOpen = !userMenuOpen; activeTab = 'profile'"
                            :class="activeTab === 'profile' ? 'bottom-nav-item active' : 'bottom-nav-item'"
                            class="flex flex-col items-center py-2 px-1 text-slate-400 hover:text-primary transition-all duration-200 hover:scale-105 relative w-full">
                        <div class="w-6 h-6 flex items-center justify-center">
                            <img src="@avatarUrl" alt="Avatar" class="profile-avatar-nav" />
                        </div>
                        <span class="text-xs mt-1 font-medium truncate">Profile</span>
                    </button>

                    <!-- Profile Menu Popup - Responsive positioning -->
                    <div x-show="userMenuOpen"
                         x-transition:enter="transition ease-out duration-200"
                         x-transition:enter-start="opacity-0 scale-95 translate-y-4"
                         x-transition:enter-end="opacity-1 scale-100 translate-y-0"
                         x-transition:leave="transition ease-in duration-150"
                         x-transition:leave-start="opacity-1 scale-100 translate-y-0"
                         x-transition:leave-end="opacity-0 scale-95 translate-y-4"
                         x-on:click.away="userMenuOpen = false"
                         class="profile-dropdown dropdown-solid rounded-2xl shadow-card z-50">

                        <!-- User Info Header -->
                        <div class="p-4 border-b border-slate-200">
                            <div class="flex items-center space-x-3">
                                <img src="@avatarUrl" alt="Avatar"
                                     class="w-12 h-12 rounded-xl border-2 border-primary/30 shadow-sm" />
                                <div class="flex-1">
                                    <p class="font-semibold text-slate-800 leading-tight">@fullName</p>
                                    <p class="text-sm text-slate-500 truncate">@userEmail</p>
                                    <span class="inline-flex items-center px-2 py-1 bg-gradient-to-r from-primary to-accent text-white text-xs rounded-full font-medium mt-1">
                                        <i class="ri-vip-crown-line mr-1"></i>Premium
                                    </span>
                                </div>
                            </div>
                        </div>

                        <!-- Menu Items -->
                        <div class="p-2">
                            <!-- Profile Link -->
                            <a asp-controller="Common" asp-action="Profile"
                               x-on:click="userMenuOpen = false"
                               class="flex items-center px-4 py-3 text-slate-700 hover:bg-primary/10 hover:text-primary rounded-xl transition-all duration-200 group">
                                <div class="w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center mr-3 group-hover:bg-primary/20 transition-colors">
                                    <i class="ri-user-3-line text-primary"></i>
                                </div>
                                <div>
                                    <span class="font-medium">View Profile</span>
                                    <p class="text-xs text-slate-400">Personal information</p>
                                </div>
                            </a>

                            <!-- Booking History - Fixed as proper menu item -->
                            <a href="#"
                               x-on:click="userMenuOpen = false"
                               class="flex items-center px-4 py-3 text-slate-700 hover:bg-purple-50 hover:text-purple-600 rounded-xl transition-all duration-200 group">
                                <div class="w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center mr-3 group-hover:bg-purple-200 transition-colors">
                                    <i class="ri-calendar-check-line text-purple-600"></i>
                                </div>
                                <div>
                                    <span class="font-medium">My Bookings</span>
                                    <p class="text-xs text-slate-400">View booking history</p>
                                </div>
                            </a>

                            <!-- Settings -->
                            <a href="#"
                               x-on:click="userMenuOpen = false"
                               class="flex items-center px-4 py-3 text-slate-700 hover:bg-blue-50 hover:text-blue-600 rounded-xl transition-all duration-200 group">
                                <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center mr-3 group-hover:bg-blue-200 transition-colors">
                                    <i class="ri-settings-3-line text-blue-600"></i>
                                </div>
                                <div>
                                    <span class="font-medium">Settings</span>
                                    <p class="text-xs text-slate-400">Account preferences</p>
                                </div>
                            </a>

                            <!-- Divider -->
                            <hr class="my-3 border-slate-200">

                            <!-- Sign Out -->
                            <a asp-controller="Common" asp-action="Logout"
                               x-on:click="userMenuOpen = false"
                               class="flex items-center px-4 py-3 text-red-600 hover:bg-red-50 rounded-xl transition-all duration-200 group">
                                <div class="w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center mr-3 group-hover:bg-red-200 transition-colors">
                                    <i class="ri-logout-circle-line text-red-600"></i>
                                </div>
                                <div>
                                    <span class="font-medium">Sign Out</span>
                                    <p class="text-xs text-red-400">See you next time!</p>
                                </div>
                            </a>
                        </div>
                    </div>
                }
                else
                {
                    <a asp-controller="Common" asp-action="Login"
                       x-on:click="activeTab = 'profile'"
                       :class="activeTab === 'profile' ? 'bottom-nav-item active' : 'bottom-nav-item'"
                       class="flex flex-col items-center py-2 px-1 text-slate-400 hover:text-primary transition-all duration-200 hover:scale-105 relative w-full">
                        <div class="w-6 h-6 flex items-center justify-center">
                            <i class="ri-user-3-line text-lg"></i>
                        </div>
                        <span class="text-xs mt-1 font-medium truncate">Sign In</span>
                    </a>
                }
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div id="main-body" role="main" class="pb-24 max-w-7xl mx-auto px-4 animate-fade-in">
        @RenderBody()
    </div>

    <!-- Enhanced Footer -->
    <footer id="footer" class="bg-gradient-to-r from-slate-900 to-slate-800 text-white py-16 mt-12 relative overflow-hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
                <!-- Logo & social -->
                <div>
                    <div class="flex items-center space-x-3 mb-4">
                        <div class="w-10 h-10 gradient-primary rounded-xl flex items-center justify-center">
                            <i class="ri-football-line text-white text-lg"></i>
                        </div>
                        <h3 class="font-poppins font-bold text-2xl logo-gradient">SportVenue</h3>
                    </div>
                    <p class="text-slate-300 mb-6 leading-relaxed">Your premier destination for booking sports stadiums and facilities across the city.</p>
                    <div class="flex space-x-3">
                        <button class="w-12 h-12 bg-slate-800 hover:bg-primary rounded-xl transition-all duration-300 hover:scale-110 flex items-center justify-center">
                            <i class="ri-facebook-fill text-lg"></i>
                        </button>
                        <button class="w-12 h-12 bg-slate-800 hover:bg-primary rounded-xl transition-all duration-300 hover:scale-110 flex items-center justify-center">
                            <i class="ri-twitter-fill text-lg"></i>
                        </button>
                        <button class="w-12 h-12 bg-slate-800 hover:bg-primary rounded-xl transition-all duration-300 hover:scale-110 flex items-center justify-center">
                            <i class="ri-instagram-fill text-lg"></i>
                        </button>
                    </div>
                </div>

                <!-- Quick links -->
                <div>
                    <h4 class="text-lg font-semibold mb-6 text-white">Quick Links</h4>
                    <ul class="space-y-3">
                        <li><a asp-controller="Stadiums" asp-action="Index" class="text-slate-300 hover:text-white transition-colors duration-200 flex items-center"><i class="ri-arrow-right-s-line mr-2"></i>Find Stadiums</a></li>
                        <li><a asp-controller="Sports" asp-action="Index" class="text-slate-300 hover:text-white transition-colors duration-200 flex items-center"><i class="ri-arrow-right-s-line mr-2"></i>Sports Categories</a></li>
                        <li><a href="#" class="text-slate-300 hover:text-white transition-colors duration-200 flex items-center"><i class="ri-arrow-right-s-line mr-2"></i>Pricing</a></li>
                        <li><a asp-controller="Home" asp-action="About" class="text-slate-300 hover:text-white transition-colors duration-200 flex items-center"><i class="ri-arrow-right-s-line mr-2"></i>About Us</a></li>
                    </ul>
                </div>

                <!-- Support -->
                <div>
                    <h4 class="text-lg font-semibold mb-6 text-white">Support</h4>
                    <ul class="space-y-3">
                        <li><a href="#" class="text-slate-300 hover:text-white transition-colors duration-200 flex items-center"><i class="ri-arrow-right-s-line mr-2"></i>Help Center</a></li>
                        <li><a asp-controller="Home" asp-action="Contact" class="text-slate-300 hover:text-white transition-colors duration-200 flex items-center"><i class="ri-arrow-right-s-line mr-2"></i>Contact Us</a></li>
                        <li><a href="#" class="text-slate-300 hover:text-white transition-colors duration-200 flex items-center"><i class="ri-arrow-right-s-line mr-2"></i>Booking Policy</a></li>
                        <li><a href="#" class="text-slate-300 hover:text-white transition-colors duration-200 flex items-center"><i class="ri-arrow-right-s-line mr-2"></i>Terms of Service</a></li>
                    </ul>
                </div>

                <!-- Enhanced Newsletter -->
                <div>
                    <h4 class="text-lg font-semibold mb-6 text-white">Stay Updated</h4>
                    <p class="text-slate-300 mb-4">Subscribe for updates and exclusive offers.</p>
                    <div class="space-y-3">
                        <input type="email" placeholder="Your email"
                               class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-slate-300 focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all duration-300">
                        <button class="w-full btn-enhanced gradient-primary text-white px-6 py-3 rounded-xl font-semibold shadow-soft">
                            <i class="ri-send-plane-line mr-2"></i>
                            Subscribe
                        </button>
                    </div>
                </div>
            </div>

            <div class="border-t border-slate-700 mt-12 pt-8 text-center">
                <p class="text-slate-300">&copy; 2025 SportVenue Platform. All rights reserved. Made with ❤️ for sports enthusiasts.</p>
            </div>
        </div>

        <!-- Decorative Elements -->
        <div class="absolute top-0 right-0 w-96 h-96 bg-gradient-to-l from-primary/10 to-transparent rounded-full blur-3xl"></div>
        <div class="absolute bottom-0 left-0 w-96 h-96 bg-gradient-to-r from-secondary/10 to-transparent rounded-full blur-3xl"></div>
    </footer>

    <!-- Scripts -->
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>

    <!-- Enhanced JavaScript -->
    <script>
        // Enhanced performance monitoring
        window.addEventListener('load', function () {
            console.log('🚀 SportVenue Mobile loaded successfully!');
            document.body.classList.add('loaded');
        });

        // Enhanced touch interactions
        document.addEventListener('DOMContentLoaded', function () {
            // Add touch feedback to all buttons
            const buttons = document.querySelectorAll('button, .btn-enhanced');
            buttons.forEach(button => {
                button.addEventListener('touchstart', function () {
                    this.style.transform = 'scale(0.95)';
                }, { passive: true });

                button.addEventListener('touchend', function () {
                    this.style.transform = '';
                }, { passive: true });
            });

            // Enhanced scroll behavior for bottom nav
            let lastScrollTop = 0;
            const bottomNav = document.querySelector('.mobile-nav:last-of-type');
            const quickAction = document.querySelector('.quick-action');

            window.addEventListener('scroll', function () {
                let scrollTop = window.pageYOffset || document.documentElement.scrollTop;

                if (scrollTop > lastScrollTop && scrollTop > 100) {
                    // Scrolling down - hide navigation
                    bottomNav.style.transform = 'translateY(100%)';
                    if (quickAction) quickAction.style.transform = 'scale(0)';
                } else {
                    // Scrolling up - show navigation
                    bottomNav.style.transform = 'translateY(0)';
                    if (quickAction) quickAction.style.transform = 'scale(1)';
                }
                lastScrollTop = scrollTop;
            }, { passive: true });
        });
    </script>

    @RenderSection("Scripts", required: false)

    // Function to update user info in header dynamically
    <script>
        // Enhanced global function for header update from session
        window.refreshHeaderFromSession = function () {
            console.log('🔄 Refreshing header with session data...');

            fetch('/Common/GetUserHeaderInfo')
                .then(response => response.json())
                .then(data => {
                    console.log('📊 Session data received:', data);

                    // Update avatar images
                    const avatarImages = document.querySelectorAll('img[alt="Avatar"]');
                    avatarImages.forEach(img => {
                        if (img) {
                            const updatedAvatarUrl = data.avatarUrl + '?t=' + Date.now();
                            console.log(`Updating avatar: ${img.src} → ${updatedAvatarUrl}`);
                            img.src = updatedAvatarUrl;
                            img.onerror = function () {
                                this.src = '/images/default-avatar.png';
                            };
                        }
                    });

                    // Update full name
                    const fullNameElements = document.querySelectorAll('.p-4 .font-semibold'); // Selector của FullName
                    fullNameElements.forEach(element => {
                        if (element && data.fullName) {
                            console.log(`Updating full name: ${element.textContent} → ${data.fullName}`);
                            element.textContent = data.fullName;
                        }
                    });

                    // Update email
                    const emailElements = document.querySelectorAll('.p-4 .text-sm');
                    emailElements.forEach(element => {
                        if (element && data.email) {
                            console.log(`Updating email: ${element.textContent} → ${data.email}`);
                            element.textContent = data.email;
                        }
                    });

                    console.log('✅ Header refreshed successfully!');
                })
                .catch(error => {
                    console.error('❌ Error refreshing header from session:', error);
                });
        };

        // Auto-initialize when DOM is ready
        document.addEventListener('DOMContentLoaded', function () {
            console.log('🚀 Mobile layout header refresh initialized');
            console.log('💡 Available functions: refreshHeaderFromSession()');

            // Test function for development
            if (window.location.hostname === 'localhost') {
                window.testSessionRefresh = function () {
                    console.log('🧪 Testing session refresh...');
                    return window.refreshHeaderFromSession();
                };
            }
        });
    </script>

    <script>
        async function updateMobileNotificationBadges() {
            try {
                const resp = await fetch('/Notification/GetUnreadNotificationCount');
                if (resp.ok) {
                    const count = await resp.json();
                    // Bottom nav badge
                    const badgeBottom = document.getElementById('notification-badge-bottom');
                    if (badgeBottom) {
                        if (count > 0) {
                            badgeBottom.textContent = count;
                            badgeBottom.style.display = 'flex';
                        } else {
                            badgeBottom.style.display = 'none';
                        }
                    }
                }
            } catch (err) {
                // Nếu cần xử lý lỗi
                console.error('Error fetching notification count:', err);
            }
        }
        document.addEventListener('DOMContentLoaded', updateMobileNotificationBadges);
    </script>

</body>
</html>